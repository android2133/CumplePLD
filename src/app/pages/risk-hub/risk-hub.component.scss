/* --- Animación y Cabecera --- */
@keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
.card-animated { animation: fadeInUp 0.6s ease-out forwards; opacity: 0; }
.page-header { margin-bottom: 2rem; h1 { font-weight: 600; font-size: 2rem; color: var(--primary-color); } }

/* --- WIDGET: CALIFICACIÓN DE RIESGO --- */
.gauge-container {
  position: relative;
  width: 280px;
  height: 140px;
  display: flex;
  justify-content: center;
  align-items: center;
  margin-top: 1rem;
}
.gauge-svg { width: 100%; height: 100%; }
.gauge-background-arc, .gauge-color-arc { fill: none; stroke-width: 22; stroke-linecap: butt; }
.gauge-background-arc { stroke: #f4f7f9; }
.gauge-color-arc {
  &.low { stroke: #28a745; }
  &.moderate { stroke: #ffc107; }
  &.high { stroke: #dc3545; }
}
.gauge-needle-container {
  position: absolute;
  top: 0; left: 0; width: 100%; height: 100%;
  display: flex;
  justify-content: center;
  transition: transform 1.5s cubic-bezier(0.23, 1, 0.32, 1);
  transform-origin: 50% 93%;
}
.gauge-needle { width: 6px; height: 55%; background-color: #343a40; border-radius: 3px 3px 0 0; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }
.gauge-pivot { position: absolute; bottom: 5px; width: 20px; height: 20px; background-color: #343a40; border-radius: 50%; border: 4px solid #fff; z-index: 1; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
.gauge-text { position: absolute; top: 75%; left: 50%; transform: translate(-50%, -50%); text-align: center; }
.gauge-value { font-size: 3rem; font-weight: 700; color: var(--primary-color); }
.gauge-range-labels { position: absolute; width: 100%; bottom: -20px; display: flex; justify-content: space-between; padding: 30px 15px 0px 15px; font-size: 0.9rem; font-weight: 600; color: var(--text-secondary-color); }

/* --- WIDGET: MAPA DE CALOR --- */
@keyframes cell-pop-in { from { opacity: 0; transform: scale(0.5); } to { opacity: 1; transform: scale(1); } }
.heatmap-container { display: flex; flex-direction: column; gap: 0.75rem; padding: 0.5rem; }
.heatmap-row { display: flex; align-items: center; }
.heatmap-label { width: 210px; font-size: 1rem; font-weight: 500; padding-right: 5px; }
.heatmap-cells { display: flex; gap: 5px; }
.heatmap-cell {
  width: 35px; height: 35px; border-radius: 6px; opacity: 0;
  animation: cell-pop-in 0.4s ease-out forwards;
  border: 1px solid rgba(0,0,0,0.05);
  transition: all 0.2s ease;
  cursor: pointer;
  &:hover { transform: scale(1.15); box-shadow: 0 4px 10px rgba(0,0,0,0.2); }
}
.risk-level-1 { background-color: #eaf6ff; }
.risk-level-2 { background-color: #d4edff; }
.risk-level-3 { background-color: #ffeed4; }
.risk-level-4 { background-color: #ffe0b3; }
.risk-level-5 { background-color: #ffd4d7; }

/* --- WIDGET: DISTRIBUCIÓN DE CLIENTES --- */
.pie-chart-wrapper {
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  margin-right: 2.5rem;
}
.pie-chart-center-text {
  position: absolute;
  text-align: center;
  pointer-events: none;
  .total-value { font-size: 2.5rem; font-weight: 700; color: var(--primary-color); line-height: 1; }
  .total-label { font-size: 1rem; color: var(--text-secondary-color); }
}
.pie-chart-container {
  width: 180px; height: 180px; border-radius: 50%;
  transition: transform 0.3s ease;
  border: 10px solid var(--background-color);
  box-shadow: 0 0 15px rgba(0,0,0,0.1) inset;
  &:hover { transform: scale(1.05); }
}
.pie-chart-legend { display: flex; flex-direction: column; gap: 1rem; }
.legend-item { display: flex; align-items: center; font-size: 1rem; }
.legend-color {
  width: 20px; height: 20px; border-radius: 4px; margin-right: 0.75rem;
  &.low { background-color: #28a745; }
  &.moderate { background-color: #ffc107; }
  &.high { background-color: #dc3545; }
}

/* --- WIDGET DE BÚSQUEDA --- */
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
.search-result-container {
  margin-top: 1.5rem;
  padding-top: 1.5rem;
  border-top: 1px solid #eee;
  text-align: center;
  animation: fadeIn 0.5s ease-in;
  mat-icon { font-size: 48px; width: 48px; height: 48px; color: var(--text-secondary-color); }
  .result-name { font-size: 1.2rem; font-weight: 500; margin-bottom: 0.25rem; }
  .result-score-container { margin-top: 1rem; }
  .result-score { font-size: 3rem; font-weight: 700; line-height: 1; }
  .result-label { font-size: 1rem; font-weight: 500; }
}

/* --- NUEVO: Estilos para la barra de progreso del score --- */
.score-bar-container {
  width: 100%;
  height: 12px;
  background-color: #f4f7f9;
  border-radius: 6px;
  margin-top: 1rem;
  overflow: hidden;
}
.score-bar-fill {
  height: 100%;
  border-radius: 6px;
  width: 0%; /* Inicia en 0 */
  transition: width 1.5s cubic-bezier(0.23, 1, 0.32, 1), background-color 0.5s ease;
}

/* --- WIDGET: MATRIZ DE RIESGO --- */
.config-icon { font-size: 52px; width: 52px; height: 52px; color: var(--primary-color); margin-bottom: 1rem; }


/* --- NUEVO: Estilos para las acciones de búsqueda --- */
.search-actions {
  display: flex;
  gap: 8px; /* Espacio entre botones */
  margin-top: 1rem;
  align-items: center;

  /* El botón de búsqueda ocupará el espacio principal */
  button[mat-flat-button] {
    flex-grow: 1;
  }
}